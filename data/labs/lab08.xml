<?xml version="1.0" encoding="UTF-8"?>
<!--
Lab 07 - XML Processing
-->
<lab status="beta">
    <!-- Activity metadata ... override anything from the course or organizer -->
    
    <!-- The meat of the presentation -->
    <slide title="Lab Goals" layout="normal">
        <p>The purpose of this lab is to help you practice working with
            SimpleXML, from lesson xml03.</p>
        <p>This lab is to be completed with the same team and repository that
            you setup for Lab 7.</p>
        <p>Suggestion: you may want to skim the slideshow first,
            before working your way through it.</p>
    </slide>

    <slide title="Lab Submission" layout="normal">
        <p>Submit a readme to your Lab 8 dropbox, with a link to
            the github repository you used for this lab.</p>
        <p>Please make sure that your work is in the "master" branch
            or your repository, and that any other branches have
            been merged into it.</p>
        <p>Due: five days after your lab, at 17:30.</p>
    </slide>

    <slide title="Lab Marking Guideline" layout="normal">
        <ul>
            <li>3 marks for the prescribed <code>Timetable</code> model</li>
            <li>2 marks for the prescribed <code>Booking</code> entity model</li>
            <li>2 marks for <code>Welcome::index</code> as prescribed</li>
            <li>2 marks for <code>Welcome::search</code> as prescribed</li>
            <li>1 mark for reasonable workflow</li>
        </ul>
            
    </slide>

    <slide title="Lab Preparation" layout="normal">
        <p>Make sure that your XML documents and DTD are in a <code>/data</code> 
            folder inside your project.</p>
        <p>Incorporate your CodeIgniter starter into your project, if you have not already done so.</p>
        <p>The <a href="/show/tutorial/xml-xml02" target="_blank">SimpleXML tutorial</a> is worth a read!</p>
    </slide>
    
    <slide title="Basic Model" layout="normal">
        <p>Create a basic <code>Timetable</code> model for your XML data.</p>
        <p>Choose appropriate properties to hold each of your timetable facets.</p>
        <p>Populate these in your model constructor.</p>
    </slide>

    <slide title="Entity Model" layout="normal">
        <p>Make a <code>Booking</code> entity model class, which will go inside
            your <code>Timetable</code> model's source code file, at the end.</p>
        <p>It should contain O-O properties to match all of the attributes and
            nested elements in your XML booking data. These properties can
            be public, for convenience.</p>
        <p>You could plan to populate these individually, but it
            might make more sense to have a SimpleXMLElement passed
            to the <code>Booking</code> constructor, from which as much data as
            possible can be abstracted.</p>
        <p>However you choose to populate a <code>Booking</code>'s properties,
            the values should be simple PHP data types, and *not*
            SimpleXMLElements.</p>
    </slide>

    <slide title="Facet Accessors" layout="normal">
        <p>Build an accessor method for each facet, which returns an
            array of <code>Booking</code> objects appropriate to that facet.</p>
    </slide>

    <slide title="Basic Homepage" layout="normal">
        <p>You can now create your basic homepage, which should
            report each of the three sets of bookings, one for each facet.</p>
    </slide>

    <slide title="Present search form" layout="normal">
        <p>Add two methods to your <code>Timetable</code> to return the data
            needed to populate a dropdown for days of the week
            and another for timeslots. These would each be an associative
            array, with the keys being the codes you chose inside
            your XML data and the values being suitable display text.</p>
        <p>Add a "search" HTML form to your homepage, with two dropdowns
            built from these.</p>
    </slide>

    <slide title="Make the Timetable Searchable" layout="normal">
        <p>Add search methods to your <code>Timetable</code> model, one for each
            facet. These should return an array of <code>Booking</code> objects
            that match the selected day and timeslot according to
            the facet they pertain to.</p>
        <p>An example: <code>public function findByCourse($day,$slot) {...}</code></p>
    </slide>

    <slide title="Bingo" layout="normal">
        <p>Here's the fun part: bind your search form to a <code>search</code>
            method in your <code>Welcome</code> controller.</p>
        <p>It should search the timetable using each facet, and ...
            if each of the facet searches returns a single <code>Booking</code>, and the
            three <code>Booking</code>s are the same, then you can report "Bingo" and display 
            one of them.</p>
        <p>If the searches do not return the same <code>Booking</code>, or more than one,
            then communicate that in your output, for instance "by timeslot gives ..."
            and "by course gives ..." etc. 
        </p>
    </slide>

    <slide title="And then..." layout="normal">
        <p>
            <strong>If</strong> you have complete data, and it is consistent,
            then you should always get either a "bingo" or else nothing for a
            given search. If your data is incomplete (for instance, you only
            provided one or two instances of bookings for a facet), you
            won't get a "bingo".
        </p>
        <p>The intent is to correctly identify inconsistent data, and not 
            to always get a "bingo"!</p>
        <p>The search results can be added to the homepage. In other words,
            the homepage will show the three facets, the search form, and
            the result of the immediately prior search (if appropriate).</p>
    </slide>

    <slide title="Tidy Up" layout="normal">
        <p>Tidy up the presentation for your homepage, and you are done!</p>
    </slide>



</lab>
